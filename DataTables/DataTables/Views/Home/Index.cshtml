@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>

    <link href="~/Content/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="~/Content/datatables/datatables.min.css" rel="stylesheet" />
    <link href="~/Content/datatables/plugins/bootstrap/datatables.bootstrap.css" rel="stylesheet" />
    <script src="~/Content/jquery.min.js"></script>
    <script src="~/Content/bootstrap/js/bootstrap.min.js"></script>
    <script src="~/Content/datatables/datatables.js"></script>
    <script src="~/Content/datatables/datatables.min.js"></script>
    <script src="~/Content/datatables/plugins/bootstrap/datatables.bootstrap.js"></script>
    <script>
        var table = null;
        var TableDataTables = function () {
            var language = {
                aria: {
                    "sortAscending": ": 使用列升序进行排序",
                    "sortDescending": ": 使用列降序进行排序"
                },
                emptyTable: "没有数据",
                info: "当前 _START_ 到 _END_ 行,共 _TOTAL_ 行",
                infoEmpty: "没有找到记录",
                infoFiltered: "(搜索 从 _MAX_ 行中)",
                lengthMenu: "显示 _MENU_ 行",
                search: "",
                searchPlaceholder: "搜索",
                zeroRecords: "没有找到匹配的记录...",
                processing: "正在加载...",
                "paginate": {
                    "first": "第一页",
                    "last": "最后一页",
                    "next": "下一页",
                    "previous": "上一页"
                }
            };
            var handleCrossmbrTable = function () {
                table = $("#crossmbr-table").dataTable({
                    language: language,
                    pageLength: 10,
                    pagingType: "full_numbers",
                    responsive: true,
                    processing: true,
                    serverSide: true,
                    order: [2, "desc"],
                    columns: [
                     { "data": "S_Id" },
                     { "data": "S_No" },
                     { "data": "S_C_Id" },
                     { "data": "S_Name" },
                     { "data": "S_state" },
                    ],
                    ajax: {
                        "type": "POST",
                        "url": "/Home/Index",
                        data: {}
                    },
                    "columnDefs": [{
                        "render": function (data, type, row, meta) {
                            return (data == true) ? "已点名" : "未点名";
                        },
                        "targets":[4]
                    }, {
                        "render": function (data, type, row, meta) {
                            if (data == 1){
                                return "2014272班";
                            }
                            if (data == 2) {
                                return "2014274班";
                            }
                            if (data == 3) {
                                return "2014273班";
                            }
                        },
                        "targets": [2]
                    }],
                    dom: "<'row'<'col-md-12 col-sm-12'lf>r><'table-scrollable't><'row'<'col-md-5 col-sm-12'i><'col-md-7 col-sm-12'p>>",
                })
            }
            return {
                init: function () {
                    handleCrossmbrTable();
                },
                reload: function () {
                    table.api().destroy();
                    TableDataTables.init();
                },
                tableReload: function () {
                    table.api().destroy();
                    handleCrossmbrTable();
                }
            };
        }();
        $(function () {
            TableDataTables.init();
        })
    </script>
</head>
<body>
    <div>
        <table id="crossmbr-table" class="table table-striped table-bordered table-hover order-column table-center">
            <thead>
                <tr>
                    <th>编号</th>
                    <th>学号</th>
                    <th>班级</th>
                    <th>姓名</th>
                    <th>状态</th>
                </tr>
            </thead>
        </table>
</div>
</body>
</html>
